output {

  stdout {
    codec => rubydebug
  }


  # monitor all error find in all log files
  if "error" in [tags]  {
     file {
         path => "/var/log/logstash/%{[log_type]}-%{[env]}-%{[host][name]}-error-%{+YYYY.MM.dd}.log"
         #max_size => 20000000
         #message_format => "%{message}"
      }
   }

   # log all parsing logs errors
   if "_grokparsefailure" in [tags] {
        file { path => "/var/log/logstash/%{[log_type]}-%{[env]}-%{[host][name]}-grokparsefailure-%{+YYYY.MM.dd}.log" }
   }


  elasticsearch {
    hosts => ["localhost:9200"]
    manage_template => false
    index => "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}"
    document_type => "%{[@metadata][type]}"
  }

}
